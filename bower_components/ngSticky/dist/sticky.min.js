!function(){"use strict";var t=angular.module("sticky",[]);t.directive("sticky",["$window","$timeout",function(t){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function(e,n,i){function o(){k=e.calculateStickyContentInitialDimensions(),U&&(n[0].getBoundingClientRect().height||(S=e.$watch(function(){return n.height()},function(t){t>0&&(k=e.calculateStickyContentInitialDimensions(),O||S())})))}function s(e){var n=r(b,e);return 1===n.length?n[0]:t}function r(t,e){var n,i=[],o=e.parent();do{var s=o[0];if(1!==s.nodeType)break;if(s.tagName.toUpperCase()===t.toUpperCase())return o;n=o.parent(),o=n}while(0!==n.length);return i}function c(e){return"true"===e?t.innerHeight-(n[0].offsetHeight+parseInt(A))<0:!1}function a(t,e,n){var i="top",o=Math.abs(t-e),s=Math.abs(t-n);return o>s&&(i="bottom"),i}function l(t){n.attr("style",P),x=!1,D.removeClass(L),n.removeClass(I),n.addClass(T),"top"===t?(n.removeClass(H),n.css("z-index",10).css("width",n[0].offsetWidth).css("top",k.top).css("position",k.position).css("left",k.cssLeft).css("margin-top",k.marginTop).css("height",k.height)):"bottom"===t&&B===!0&&(n.addClass(H),f(),n.css("z-index",10).css("width",n[0].offsetWidth).css("top","").css("bottom",0).css("position","absolute").css("left",k.cssLeft).css("margin-top",k.marginTop).css("margin-bottom",k.marginBottom).css("height",k.height)),v&&t===E&&v.remove()}function u(){x=!0,k.offsetWidth=n[0].offsetWidth,D.addClass(L),n.removeClass(T),n.removeClass(H),n.addClass(I),f(),n.css("z-index","10").css("width",n[0].offsetWidth+"px").css("position","fixed").css("left",n.css("left").replace("px","")+"px").css(E,A+p(W)+"px").css("margin-top",0),"bottom"===E&&n.css("margin-bottom",0)}function f(){M&&(v&&v.remove(),v=angular.element("<div>"),v.css("height",n[0].offsetHeight+"px"),n.after(v))}function d(){return B&&h()>w?!0:!1}function d(){return B&&h()>w?!0:!1}function p(t){var e=0;return t.getBoundingClientRect&&(e=t.getBoundingClientRect().top),e}function h(){var t;return t="undefined"!=typeof W.scrollTop?W.scrollTop:"undefined"!=typeof W.pageYOffset?W.pageYOffset:document.documentElement.scrollTop}function g(){var e;return e=z[0]instanceof HTMLElement?t.getComputedStyle(z[0],null).getPropertyValue("height").replace(/px;?/,""):t.innerHeight,parseInt(e)||0}function m(){var e=i.mediaQuery||!1,n=t.matchMedia;return e&&!(n("("+e+")").matches||n(e).matches)}var y,v,C,S,k,b="sticky-scroll",w=0,x=!1,I=i.stickyClass||"",T=i.unstickyClass||"",L=i.bodyClass||"",H=i.bottomClass||"",W=s(n),$=angular.element(t),z=angular.element(W),D=angular.element(document.body),M="false"!==i.usePlaceholder,E="bottom"===i.anchor?"bottom":"top",B="true"===i.confine,U=void 0!==i.isStickyLayoutDeferred?"true"===i.isStickyLayoutDeferred:!1,O=void 0!==i.isStickyLayoutWatched?"true"===i.isStickyLayoutWatched:!0,R=n.css("position"),A=i.offset?parseInt(i.offset.replace(/px;?/,"")):0,P=n.attr("style")||"",Y=function(){z.on("scroll",N),$.on("resize",e.$apply.bind(e,V)),o(),e.$on("$destroy",Q)},N=function(){if((e.disabled===!0||m())&&x)return l();var t,o=h();t="top"===E?B===!0?o>y&&w>=o:o>y:y>=o;var s=a(o,y,w);!t||c(i.stickLimit)||x?!t&&x?l(s,o):B&&!t&&(C=p(n[0]),l(s,o)):u(s)},Q=function(){z.off("scroll",N),$.off("resize",V),D.removeClass(L),v&&v.remove()},V=function(){l(E),N()},j=function(){return e.disabled===!0?l():"top"===E?(C||p(n[0]))-p(W)+h():p(n[0])-g()+n[0].offsetHeight+h()},q=function(t,e){if(!(t===e&&"undefined"!=typeof y||x||d())){y=t-A,B&&n.parent().css({position:"relative"});var i=n.parent()[0],o=parseInt(i.offsetHeight)-(M?0:n[0].offsetHeight),s=parseInt(n.css("margin-bottom").replace(/px;?/,""))||0,r=p(n[0]),c=p(i),a=p(W),l=r-a,u=c+o-r;w=l+u-n[0].offsetHeight-s-A+ +h(),N()}};e.$watch(j,q),e.getElement=function(){return n},e.getScrollbar=function(){return W},e.getInitialCSS=function(){return k},e.getAnchor=function(){return E},e.isSticking=function(){return x},e.getOriginalInitialCSS=function(){return F},e.processUnStickElement=function(t){l(t)},e.processCheckIfShouldStick=function(){N()},e.calculateStickyContentInitialDimensions=function(){return{zIndex:n.css("z-index"),top:n.css("top"),position:R,marginTop:n.css("margin-top"),marginBottom:n.css("margin-bottom"),cssLeft:n.css("left"),height:n.css("height")}},e.updateStickyContentUpdateDimensions=function(t,e){t&&e&&(k.width=t+"px",k.height=e+"px")};var F=e.calculateStickyContentInitialDimensions();Y()},controller:["$scope","$window",function(t,e){this.resetLayout=function(n,i){function o(){"top"===c&&(s===e?e.scrollTo(0,0):s.scrollTop>0&&(s.scrollTop=0))}var s=t.getScrollbar(),r=t.getInitialCSS(),c=t.getAnchor();if(t.isSticking()&&(t.processUnStickElement(c),t.processCheckIfShouldStick()),t.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),r.position=t.getOriginalInitialCSS().position,delete r.offsetWidth,void 0===n&&void 0===i){var a=t.getElement()[0].getBoundingClientRect();n=a.width,i=a.height}t.updateStickyContentUpdateDimensions(n,i),o()},this.getScrollbar=function(){return t.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var t="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(t),function(){return{matches:!0}}}()}();