<!DOCTYPE html>
<html ng-app="fitners">
    <head>
		<link rel="icon" type="image/png" href="favicon.png" />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-select.min.css">
        <link rel="stylesheet" href="css/jquery-ui.min.css">

        <link rel="stylesheet" href="css/style.css">

        <!-- <script src='lib/firebase-debug.js'></script> -->
        <script src='lib/firebase.js'></script>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/jquery-ui.min.js"></script>
        <script src="lib/bootstrap.min.js"></script>
        <script src="lib/angular.min.js"></script>
        <script src="lib/ui-bootstrap-tpls-0.13.4.min.js"></script>
        <script src="lib/slider.js"></script>

        <script src='js/gyms.js'></script>
        <script src='js/script.js'></script>

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    </head>
    <body ng-controller="SearchController as searchCtrl">
        <div class="header">
            <div class="container container-limit">
                <div class="row">
                    <div class="col-xs-12 col-sm-4 logo"></div>
                    <div class="col-xs-12 col-sm-8 motto">
                        <p>Seleccionamos a los mejores entrenadores personales de tu ciudad</p>
                        <p class="calltoaction">Filtra, compara y elige la mejor opción!</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="statistics statistics-phone">
            <div class="container container-limit">
                <div class="row">
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        Gente que QUIERE cambiar su cuerpo
                        <div class="statisticsbox"><span>3200 visitas éste mes</span></div>
                    </div>
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        Personas que lo HACEN
                        <div class="statisticsbox"><span>64 entrenadores contactados</span></div>
                    </div>
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        Los VALIENTES siempre son minoría
                        <div class="statisticsbox"><span><strong>¿Y Tú?</strong> Eres uno de los que se atreven a dar el paso y cambiar?!</span></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="statistics statistics-pc">
            <div class="container container-limit">
                <div class="row">
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        Gente que QUIERE cambiar su cuerpo
                    </div>
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        Personas que lo HACEN
                    </div>
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        Los VALIENTES siempre son minoría
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        <div class="statisticsbox"><span>3200 visitas éste mes</span></div>
                    </div>
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        <div class="statisticsbox"><span>64 entrenadores contactados</span></div>
                    </div>
                    <div class="col-xs-8 col-xs-offset-2 col-sm-4 col-sm-offset-0">
                        <div class="statisticsbox"><span><strong>¿Y Tú?</strong> Eres uno de los que se atreven a dar el paso y cambiar?!</span></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4">
                    <div class="container-fluid container-limit searchbox">
                        <div class="row">
                            <div class="col-xs-12 question">
                                ¿Qué estás buscando?
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.searchcriteria = 'area'" ng-show="searchCtrl.searchcriteria == 'gym'">
                                <i class="fa fa-minus-square"></i>
                                Búsqueda por gimnasio
                            </div>
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.searchcriteria = 'gym'" ng-show="searchCtrl.searchcriteria == 'area'">
                                <i class="fa fa-plus-square"></i>
                                Búsqueda por gimnasio
                            </div>
                        </div>
                        <div class="row" ng-show="searchCtrl.searchcriteria == 'gym'">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria">
                                <!-- <input type="text" ng-model="searchCtrl.gym"> -->
                                <input type="text" ng-model="searchCtrl.gym" typeahead="gym.name for gym in searchCtrl.gyms | filter:$viewValue | limitTo:8" placeholder="Escribe tu gimnasio" class="form-control">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.searchcriteria = 'gym'" ng-show="searchCtrl.searchcriteria == 'area'">
                                <i class="fa fa-minus-square"></i>
                                Búsqueda por zona
                            </div>
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.searchcriteria = 'area'" ng-show="searchCtrl.searchcriteria == 'gym'">
                                <i class="fa fa-plus-square"></i>
                                Búsqueda por zona
                            </div>
                        </div>
                        <div class="row" ng-show="searchCtrl.searchcriteria == 'area'">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria">
                                <select class="form-control" name="areaSelect" ng-options="area as area for area in searchCtrl.areas" ng-model="searchCtrl.area">
                                    <option value="">Escoje una zona</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.showGoal = true" ng-show="searchCtrl.showGoal == false">
                                <i class="fa fa-plus-square"></i>
                                Especialidad
                            </div>
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.showGoal = false" ng-show="searchCtrl.showGoal == true">
                                <i class="fa fa-minus-square"></i>
                                Especialidad
                            </div>
                        </div>
                        <div class="row" ng-show="searchCtrl.showGoal">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria">
                                <p>
                                    <input type="checkbox" id="checkboxVolume" ng-model="searchCtrl.goalVolume">
                                    <label for="checkboxVolume">Volumen</label>
                                </p>
                                <p>
                                    <input type="checkbox" id="checkboxDefinition" ng-model="searchCtrl.goalDefinition">
                                    <label for="checkboxDefinition">Definición</label>
                                </p>
                                <p>
                                    <input type="checkbox" id="checkboxWeight" ng-model="searchCtrl.goalWeight">
                                    <label for="checkboxWeight">Perder peso</label>
                                </p>
                                <p>
                                    <input type="checkbox" id="checkboxDiet" ng-model="searchCtrl.goalDiet">
                                    <label for="checkboxDiet">Nutrición</label>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.showPrice = true" ng-show="searchCtrl.showPrice == false">
                                <i class="fa fa-plus-square"></i>
                                Precio
                            </div>
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.showPrice = false" ng-show="searchCtrl.showPrice == true">
                                <i class="fa fa-minus-square"></i>
                                Precio
                            </div>
                        </div>
                        <div class="row" ng-show="searchCtrl.showPrice">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria">
                                <div class='pricerange'>{{searchCtrl.pricerange | pricerange}}</div>
                                <div ui-slider="{range: true}" min="20" max="60" step="5"           ng-model="searchCtrl.pricerange"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.showQualifications = true" ng-show="searchCtrl.showQualifications == false">
                                <i class="fa fa-plus-square"></i>
                                Titulación
                            </div>
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria fold" ng-click="searchCtrl.showQualifications = false" ng-show="searchCtrl.showQualifications == true">
                                <i class="fa fa-minus-square"></i>
                                Titulación
                            </div>
                        </div>
                        <div class="row" ng-show="searchCtrl.showQualifications">
                            <div class="col-xs-8 col-xs-offset-2 searchcriteria">
                                <p>
                                    <input type="checkbox" id="checkboxQualA" ng-model="searchCtrl.qualA">
                                    <label for="checkboxQualA">Qualification A</label>
                                </p>
                                <p>
                                    <input type="checkbox" id="checkboxQualB" ng-model="searchCtrl.qualB">
                                    <label for="checkboxQualB">Qualification B</label>
                                </p>
                                <p>
                                    <input type="checkbox" id="checkboxQualC" ng-model="searchCtrl.qualC">
                                    <label for="checkboxQualC">Qualification C</label>
                                </p>
                                <p>
                                    <input type="checkbox" id="checkboxQualD" ng-model="searchCtrl.qualD">
                                    <label for="checkboxQualD">Qualification D</label>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-xs-offset-3 col-sm-8 col-sm-offset-2">
                                <button ng-click="searchCtrl.search()" class="searchbutton">Buscar</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="results">
                        <div class="container-fluid container-limit">
                            <div class="row">
                                <div class="col-xs-12 notfoundmessage" ng-show="!searchCtrl.searching && !searchCtrl.results.length">Ningún resultado.</div>
                            </div>
                        </div>
                        <div class="container-fluid container-limit foundmessage">
                            <div class="row">
                                <div class="col-xs-12" ng-show="searchCtrl.searching">Buscando...</div>
                                <div class="col-xs-12" ng-show="searchCtrl.results.length">{{searchCtrl.results.length}} entrenadores personales encontrados</div>
                            </div>
                        </div>
                        <div class="container-fluid container-limit trainerresult" ng-repeat="coach in searchCtrl.results">
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 resultphoto">
                                    <img src="img/pablo.jpeg" class="img-circle" alt="Foto de {{coach.name}} {{coach.surname}}"><br/>
                                    <p>{{coach.name}} {{coach.surname}}</p>
                                    <!-- {{coach.stars}} estrellas<br/> -->
                                    <p>
                                        <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                                    </p>
                                    <a href="#" ng-click="searchCtrl.showComments(coach)">{{coach.ratings.length || 0}} valoraciones</a>
                                </div>
                                <div class="col-xs-6 col-sm-3 col-sm-push-6 resultcontact">
                                    <span class="available">Disponible!</span>
                                    <p>Contacta:</p>
                                    <a class="hidden-xs" href="mailto:{{coach.email}}" ng-class="{'resultcontactdisabled': !coach.contactoptions.email}" ng-mouseover="showemail = true" ng-mouseleave="showemail = false">
                                        <span ng-hide="showemail">Ver Email</span>
                                        <span ng-show="showemail">{{coach.email}}</span>
                                    </a>
                                    <a class="visible-xs-block" href="mailto:{{coach.email}}" ng-class="{'resultcontactdisabled': !coach.contactoptions.email}">
                                        <span>Enviar email</span>
                                    </a>
                                    <a class="hidden-xs" href="tel:{{coach.telephone}}" ng-class="{'resultcontactdisabled': !coach.contactoptions.phonecall}" ng-mouseover="showphone = true" ng-mouseleave="showphone = false">
                                        <span ng-hide="showphone">Ver Teléfono</span>
                                        <span ng-show="showphone">{{coach.telephone}}</span>
                                    </a>
                                    <a class="visible-xs-block" href="#" ng-click="searchCtrl.showPhone(coach)" ng-class="{'resultcontactdisabled': !coach.contactoptions.phonecall}">
                                        <span>Ver Teléfono</span>
                                    </a>

                                    <i class="fa fa-envelope-o" ng-class="{'disabled': !coach.contactoptions.email}"></i>
                                    <i class="fa fa-phone" ng-class="{'disabled': !coach.contactoptions.phonecall}"></i>
                                    <i class="fa fa-whatsapp" ng-class="{'disabled': !coach.contactoptions.whatsapp}"></i>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-sm-pull-3">
                                    <div class="resultdetails row">
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-12">
                                                <h1>Titulación</h1>
                                            </div>
                                            <div class="col-xs-6 col-sm-12">
                                                <p>{{coach.qualifications}}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-12">
                                                <h1>Especialidades</h1>
                                            </div>
                                            <div class="col-xs-6 col-sm-12">
                                                <p>{{coach.goals | goals}}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-12">
                                                <h1>Zonas de Trabajo</h1>
                                            </div>
                                            <div class="col-xs-6 col-sm-12">
                                                <p>{{coach.area}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row prices">
                                        <!-- <div class="col-xs-6 col-sm-12">
                                            <h1>Coste</h1>
                                        </div> -->
                                        <div class="col-xs-6 price">
                                            Disponibilidad
                                            <div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[0]}">L</div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[1]}">M</div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[2]}">M</div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[3]}">J</div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[4]}">V</div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[5]}">S</div>
                                                <div class="day" ng-class="{'dayoff': !coach.availability[6]}">D</div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 price">
                                            1 sesión
                                            <div>{{coach.wage}}€/1h</div>
                                        </div>
                                        <div class="col-xs-6 price">
                                            Pack 10 sesiones
                                            <div>{{coach.packprice}}€/10horas</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div ng-modal="searchCtrl.showModal == 'phone'" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Llamar</h4>
                    </div>
                    <div class="modal-body phone">
                        <p>{{searchCtrl.selectedCoach.telephone}}</p>

                        <a href="tel:{{searchCtrl.selectedCoach.telephone}}" type="button" class="btn btn-success">Llamar</a>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" ng-click="searchCtrl.showModal = false">Cerrar</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <div ng-modal="searchCtrl.showModal == 'comments'" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Valoraciones</h4>
                    </div>
                    <div class="modal-body">
                        <p ng-repeat="rating in searchCtrl.selectedCoach.ratings">
                            {{rating.name}} ({{rating.stars}}): {{rating.comment}}
                        </p>
                        <p ng-if="!searchCtrl.selectedCoach.ratings">No hay valoraciones</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" ng-click="searchCtrl.showModal = 'write'">+ Dejar valoración</button>
                        <button type="button" class="btn btn-default" ng-click="searchCtrl.showModal = false">Cerrar</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <div ng-modal="searchCtrl.showModal == 'write'" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Valoraciones</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="comment">Describe tu experiencia con el entrenador:</label>
                            <textarea class="form-control" rows="3" id="comment" ng-model="searchCtrl.comment"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="stars">Cuantas estrellas? (de 1 a 5)</label>
                            <input type="text" class="form-control" id="stars" ng-model="searchCtrl.stars">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" ng-click="searchCtrl.submitComment()">Guardar</button>
                        <button type="button" class="btn btn-danger" ng-click="searchCtrl.showModal = false">Cancelar</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </body>
</html>
