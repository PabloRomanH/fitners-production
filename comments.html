<div class="modal-header">
    <button type="button" class="close" ng-click="commentsCtrl.close()"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title">{{ commentsCtrl.coach.ratings ? keys(commentsCtrl.coach.ratings).length : 0 }} valoraciones</h4>
</div>
<div class="modal-body">
    <div class="row">
        <div class="col-xs-6 stars">
            <p>
                <i class="fa fa-star" ng-repeat="a in numFullStars(commentsCtrl.coach.score.total) track by $index"></i><i
                class="fa fa-star-half-o" ng-if="isHalfStar(commentsCtrl.coach.score.total)"></i><i                                  class="fa fa-star-o" ng-repeat="a in numEmptyStars(commentsCtrl.coach.score.total) track by $index"></i>
            </p>
            <span ng-repeat="type in commentsCtrl.ratings">
                <i class="fa fa-star" ng-repeat="a in numFullStars(commentsCtrl.coach.score[type]) track by $index"></i><i
                class="fa fa-star-half-o" ng-if="isHalfStar(commentsCtrl.coach.score[type])"></i><i                                  class="fa fa-star-o" ng-repeat="a in numEmptyStars(commentsCtrl.coach.score[type]) track by $index"></i>
                <br/>
            </span>

        </div>
        <div class="col-xs-6 starstext">
            <p><strong>Nota Global: {{ commentsCtrl.coach.score.total | number:1 }}</strong></p>
            Conocimientos<br/>
            Compatibilidad<br/>
            Resultados<br/>
            Puntualidad<br/>
            Calidad/Precio<br/>
        </div>

    </div>

    <div ng-repeat="rating in commentsCtrl.ratingsArray | orderBy: 'timestamp' : true">
        <hr/>
        <div class="row ratingheader">
            <div class="ratingphoto">
                <img ng-src="{{rating.photo}}">
            </div>
            <div ng-if="rating.goal == 0">
                <strong>{{rating.name}}</strong> Objetivo: Otro<br/>
                <strong>{{rating.months}} meses</strong>.
            </div>
            <div ng-if="rating.goal == 1">
                <strong>{{rating.name}}</strong> Objetivo: Volumen<br/>
                <span ng-if="rating.before != undefined && rating.after != undefined">De {{rating.before}}Kg a {{rating.after}}Kg / <strong>{{rating.after - rating.before}}Kg</strong> en</span> <strong>{{rating.months}} meses</strong>.
            </div>
            <div ng-if="rating.goal == 2">
                <strong>{{rating.name}}</strong> Objetivo: Definición<br/>
                <span ng-if="rating.before != undefined && rating.after != undefined">De {{rating.before}} a {{rating.after}} IMC / <strong>Mejora de {{rating.before - rating.after}}</strong> en </span><strong>{{rating.months}} meses</strong>.
            </div>
            <div ng-if="rating.goal == 3">
                <strong>{{rating.name}}</strong> Objetivo: Perder peso<br/>
                <span ng-if="rating.before != undefined && rating.after != undefined">De {{rating.before}}Kg a {{rating.after}}Kg / <strong>{{rating.before - rating.after}}Kg</strong> en </span><strong>{{rating.months}} meses</strong>.
            </div>
            <div ng-if="rating.goal == 4">
                <strong>{{rating.name}}</strong> Objetivo: Mejorar forma física<br/>
                <span ng-if="rating.before != undefined && rating.after != undefined">De {{rating.before}} burpees a {{rating.after}} burpees / <strong>{{rating.after - rating.before}} burpees</strong> en </span><strong>{{rating.months}} meses</strong>.
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <p>
                    <strong>Nota: {{rating.stars}}</strong><br/>
                    Comentario: {{rating.comment}}
                </p>
            </div>
        </div>
    </div>
    <div ng-if="!commentsCtrl.coach.ratings">
        <hr/>
        <p class="noratings">No hay valoraciones</p>
    </div>
</div>
<div class="modal-footer">
    <span ng-show="commentsCtrl.loggedin">{{ commentsCtrl.loggedin }} (<a href="" ng-click="commentsCtrl.logout()">desconectar</a>)</span>
    <button class="btn btn-success" type="button" ng-click="commentsCtrl.showWrite()" ng-show="!commentsCtrl.existing">+ Dejar valoración</button>
    <button class="btn btn-success" type="button" ng-click="commentsCtrl.showWrite()" ng-show="commentsCtrl.existing"><i class="fa fa-pencil fa-lg"></i> Modificar valoración</button>
    <button class="btn btn-default" type="button" ng-click="commentsCtrl.close()">Cerrar</button>
</div>
