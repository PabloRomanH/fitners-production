(function(){var a=angular.module("sticky",[]);a.directive("sticky",["$window",function(c){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function b(p,d,k){var r,j,t,s,v,q,y,g,o,w,u,f,l,n,h,i,e,x,m;p.initSticky=function(){w=false;e=c.matchMedia;q=angular.element(document.body);v=d[0];y=document.documentElement;r=k.mediaQuery||false;j=k.stickyClass||"";t=k.unstickyClass||"";s=k.bodyClass||"";x=k.useplaceholder!==undefined;o=d.attr("style")||"";l=typeof k.offset==="string"?parseInt(k.offset.replace(/px;?/,"")):0;n=typeof k.anchor==="string"?k.anchor.toLowerCase().trim():"top";h=typeof k.confine==="string"?k.confine.toLowerCase().trim():"false";h=(h==="true");g={zIndex:d.css("z-index"),top:d.css("top"),width:d.css("width"),position:d.css("position"),marginTop:d.css("margin-top"),cssLeft:d.css("left")};switch(n){case"top":case"bottom":break;default:n="top";break}i=p.getTopOffset(v);angular.element(c).on("scroll",p.checkIfShouldStick);angular.element(c).on("resize",p.$apply.bind(p,p.onResize));p.$on("$destroy",p.onDestroy)};p.getScrollTop=function(){if(typeof c.pageYOffset!=="undefined"){return c.pageYOffset}else{var A=document.body;var z=document.documentElement;z=(z.clientHeight)?z:A;return z.scrollTop}};p.getTopOffset=function(z){if(z.getBoundingClientRect){return z.getBoundingClientRect().top+document.documentElement.scrollTop}else{var A=0;if(z.offsetParent){do{A+=z.offsetTop;z=z.offsetParent}while(z)}return A}};p.getBottomOffset=function(z){return z.offsetTop+z.clientHeight};p.shouldStickWithLimit=function(A){if(A==="true"){var z=v.offsetHeight;var B=c.innerHeight;return(B-(z+parseInt(l))<0)}else{return false}};p.onResize=function(){g.offsetWidth=v.offsetWidth;p.unStickElement();p.checkIfShouldStick();if(w){var z=c.getComputedStyle(v.parentElement,null),A=v.parentElement.offsetWidth-z.getPropertyValue("padding-right").replace("px","")-z.getPropertyValue("padding-left").replace("px","");d.css("width",A+"px")}};p.onDestroy=function(){angular.element(c).off("scroll",p.checkIfShouldStick);angular.element(c).off("resize",p.onResize);if(s){q.removeClass(s)}if(m){m.remove()}};p.getClosest=function(E,C){var A=1000;var B;for(var D in E){var z=Math.abs(C-E[D]);if(z<A){A=z;B=E[D]}}return B};p.stickElement=function(){console.log("stick");var A,z;A=d[0].getBoundingClientRect();z=A.left;g.offsetWidth=v.offsetWidth;w=true;if(s){q.addClass(s)}if(t){if(d.hasClass(t)){d.removeClass(t)}}if(j){d.addClass(j)}if(x){m=angular.element("<div>");var B=d[0].offsetHeight;m.css("height",B+"px");d.after(m)}d.css("z-index","10").css("width",v.offsetWidth+"px").css("position","fixed").css(n,l+"px").css("left",z+"px").css("margin-top",0);if(n==="bottom"){d.css("margin-bottom",0)}};p.checkIfShouldStick=function(){if(p.disabled===true){p.unStickElement();return false}var E,z,D,C;if(r&&!(e("("+r+")").matches||e(r).matches)){if(w){p.unStickElement()}return}if(n==="top"){C=c.pageYOffset||y.scrollTop;E=C-(y.clientTop||0);if(h===true){z=E>=u&&E<=f}else{z=E>=u}}else{D=c.pageYOffset+c.innerHeight;z=D<=u}if(z&&!p.shouldStickWithLimit(k.stickLimit)&&!w){p.stickElement()}else{if(!z&&w){var F,B,A;B=[u,f];A=p.getClosest(B,E);if(A===u){F="top"}else{if(A===f){F="bottom"}}p.unStickElement(F,E)}}};p.unStickElement=function(z){console.log("unstick");d.attr("style",o);w=false;if(s){q.removeClass(s)}if(j){d.removeClass(j)}if(t){d.addClass(t)}if(z==="top"){d.css("z-index",g.zIndex).css("width","").css("top",g.top).css("position",g.position).css("left",g.cssLeft).css("margin-top",g.marginTop)}else{if(z==="bottom"&&h===true){d.css("z-index",g.zIndex).css("width","").css("top","").css("bottom",0).css("position","absolute").css("left",g.cssLeft).css("margin-top",g.marginTop).css("margin-bottom",g.marginBottom)}}if(m){m.remove()}};p.$watch(function(){if(p.disabled===true){p.unStickElement();return}if(w){return i+p.getScrollTop()}i=(n==="top")?p.getTopOffset(v):p.getBottomOffset(v);return i+p.getScrollTop()},function(A,z){if((A!==z||typeof u==="undefined")&&A!==0&&!w){u=A-l;if(h){d.parent().css({position:"relative"})}var C=d.parent()[0];var B=parseInt(C.offsetHeight);var D=parseInt(d.css("margin-bottom").replace(/px;?/,""))||0;f=B-(v.offsetTop+v.offsetHeight)+l+D;p.checkIfShouldStick()}});p.initSticky()}}}]);window.matchMedia=window.matchMedia||(function(){var b="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";if(window.console&&console.warn){console.warn(b)}return function(){return{matches:true}}}())}());